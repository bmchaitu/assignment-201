(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{133:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),s=a.n(c),o=(a(99),a(15)),i=a(14),l=a(12),u=a(18),d=a(194),j=a(181),p=a(179),b=a(192),m=a(28),h=a(135),g=a(177),O=a(51),x=a.n(O),f=a(180),v=a(174),y=a(22),w=a.n(y),k=a(36),S=a(27),E=a.n(S),I=a(25),U=a(3),N=Object(v.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://www.sdxcentral.com/wp-content/uploads/2020/10/What-are-Cloud-Service-Providers.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var R=Object(I.b)((function(e){return{user:e.user}}),{getUser:function(e){return function(){var t=Object(k.a)(w.a.mark((function t(a){var n,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.post("/signin",e);case 3:n=t.sent,r=n.data,localStorage.setItem("auth-token",r.token),a({type:"GET_USER",payload:Object(l.a)(Object(l.a)({},r),{},{username:e.username,loggedIn:!0})}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert("Error:",t.t0.response.data.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.user,a=e.getUser,n=Object(o.f)(),c=N(),s=r.a.useState({username:"",password:""}),O=Object(u.a)(s,2),v=O[0],y=O[1],w=function(e){y(Object(l.a)(Object(l.a)({},v),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(U.jsxs)(g.a,{container:!0,component:"main",className:c.root,children:[Object(U.jsx)(p.a,{}),Object(U.jsx)(g.a,{item:!0,xs:!1,sm:4,md:7,className:c.image}),Object(U.jsx)(g.a,{item:!0,xs:12,sm:8,md:5,component:h.a,elevation:6,square:!0,children:Object(U.jsxs)("div",{className:c.paper,children:[Object(U.jsx)(d.a,{className:c.avatar,children:Object(U.jsx)(x.a,{})}),Object(U.jsx)(f.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(U.jsxs)("form",{className:c.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),a(v),t.error?alert(t.error):n.push("/dashboard")},children:[Object(U.jsx)(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Email Address",name:"username",autoComplete:"email",autoFocus:!0,value:v.username,onChange:w}),Object(U.jsx)(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:v.password,onChange:w}),Object(U.jsx)(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:c.submit,children:"Sign In"}),Object(U.jsx)(g.a,{container:!0,children:Object(U.jsx)(g.a,{item:!0,children:Object(U.jsx)(m.b,{to:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})})]})]})})]})})),C=a(182),D=Object(v.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),T=Object(I.b)((function(e){return{user:e.user}}),{setUser:function(e){return console.log("setting user"),function(){var t=Object(k.a)(w.a.mark((function t(a){var n,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.post("/signup",e);case 3:n=t.sent,r=n.data,a({type:"SET_USER",payload:{token:r.token,username:r.username}}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert("Signup Error",t.t0.response.data.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=D(),a=r.a.useState({username:"",password:""}),n=Object(u.a)(a,2),c=n[0],s=n[1],h=Object(o.f)(),O=function(e){s(Object(l.a)(Object(l.a)({},c),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(U.jsxs)(C.a,{component:"main",maxWidth:"xs",children:[Object(U.jsx)(p.a,{}),Object(U.jsxs)("div",{className:t.paper,children:[Object(U.jsx)(d.a,{className:t.avatar,children:Object(U.jsx)(x.a,{})}),Object(U.jsx)(f.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(U.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault(),console.log("handled"),e.setUser(c),h.push("/")},noValidate:!0,children:[Object(U.jsxs)(g.a,{container:!0,spacing:2,children:[Object(U.jsx)(g.a,{item:!0,xs:12,children:Object(U.jsx)(b.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Email Address",name:"username",autoComplete:"email",onChange:O,value:c.username})}),Object(U.jsx)(g.a,{item:!0,xs:12,children:Object(U.jsx)(b.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:O,value:c.password,autoComplete:"current-password"})})]}),Object(U.jsx)(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Sign Up"}),Object(U.jsx)(g.a,{container:!0,justify:"flex-end",children:Object(U.jsx)(g.a,{item:!0,children:Object(U.jsx)(m.b,{to:"/",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})})),W=a(80),_=a.n(W),A=a(187),F=a(191),L=a(190),G=a(186),P=a(188),q=a(189),B=a(77),M=a.n(B),V=a(83),z=a(79),J=a.n(z),K=a(193),X={width:"100%",height:"150px",borderWidth:2,borderColor:"rgb(102, 102, 102)",borderStyle:"dashed",borderRadius:5};var H=function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),r=a[0],c=a[1],s=Object(n.useRef)();return Object(U.jsxs)("div",{children:[Object(U.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),null!==r){var a=new FormData;a.append("myfile",r);var n={headers:{"x-auth-token":localStorage.getItem("auth-token"),"content-type":"multipart/form-data"}};e.setState({loading:!0}),E.a.post("/upload",a,n).then((function(t){200===t.status&&(e.setState({loading:!1}),e.getAllFiles(),c(null))})).catch((function(e){console.log("Error")}))}},children:[Object(U.jsx)(V.a,{ref:s,onDrop:function(e){0!==e.length&&c(e[0])},children:function(e){var t=e.getRootProps,a=e.getInputProps;e.acceptedFiles;return Object(U.jsx)("div",{className:"container",style:{display:"flex"},children:Object(U.jsxs)("div",Object(l.a)(Object(l.a)({style:X},t({className:"dropzone"})),{},{children:[Object(U.jsx)("input",Object(l.a)({},a())),Object(U.jsx)("p",{style:{textAlign:"center"},children:"Drag 'n' drop some files here or Click here to select"})]}))})}}),Object(U.jsx)("div",{className:"upload_button_container",style:{width:"100%"},children:Object(U.jsx)(j.a,{variant:"contained",color:"default",startIcon:Object(U.jsx)(J.a,{}),type:"submit",style:{margin:"20px auto",display:"flex"},children:"Upload"})})]}),r&&Object(U.jsx)("div",{className:"files_pending",children:Object(U.jsx)(K.a,{label:r&&r.name,color:"primary"})})]})},Q={upload_container:{width:"500px",margin:"0px auto"}},Y=function(e){return Object(U.jsx)("div",{className:"upload_container",style:Q.upload_container,children:Object(U.jsx)(H,{getAllFiles:e.getAllFiles,setState:e.setState})})},Z=a(183),$=a(184),ee=a(185),te=Object(v.a)((function(e){return{toolbar:e.mixins.toolbar,content:{marginTop:50,flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)},pg:{width:"90%",margin:"auto","& > * + *":{marginTop:e.spacing(2)}},table:{minWidth:650},root:{flexGrow:1,display:"flex"},menuButton:{marginRight:e.spacing(2)},title:{justifyContent:"flex-end",alignItems:"flex-end"}}}));function ae(e){var t=e.files,a=te(),n=function(){var e=Object(k.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E()({url:"/file/".concat(t),method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download",a),document.body.appendChild(n),n.click()}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(U.jsx)(r.a.Fragment,{children:Object(U.jsx)(G.a,{component:h.a,style:{overflowX:"auto"},children:Object(U.jsxs)(A.a,{className:a.table,"aria-label":"simple table",children:[Object(U.jsx)(P.a,{children:Object(U.jsxs)(q.a,{children:[Object(U.jsx)(L.a,{style:{fontWeight:1e3},children:"File Name"}),Object(U.jsx)(L.a,{style:{fontWeight:1e3},align:"right",children:"File Size"}),Object(U.jsx)(L.a,{style:{fontWeight:1e3},align:"right",children:"Type"}),Object(U.jsx)(L.a,{style:{fontWeight:1e3},align:"right",children:"Date Uploaded"}),Object(U.jsx)(L.a,{style:{fontWeight:1e3},align:"right",children:"Download"})]})}),Object(U.jsx)(F.a,{children:t.map((function(e){return Object(U.jsxs)(q.a,{children:[Object(U.jsx)(L.a,{component:"th",scope:"row",children:e.aliases}),Object(U.jsxs)(L.a,{align:"right",children:[e.length/1e3," KB"]}),Object(U.jsx)(L.a,{align:"right",children:M.a.extension(e.contentType)}),Object(U.jsx)(L.a,{align:"right",children:new Date(e.uploadDate).toLocaleDateString("en-US")}),Object(U.jsx)(L.a,{align:"right",children:Object(U.jsx)(j.a,{onClick:function(){n(e.filename,e.aliases)},children:Object(U.jsx)(_.a,{})})})]},e._id)}))})]})})})}var ne=Object(I.b)((function(e){return{user:e.user}}),{removeUser:function(){return{type:"REMOVE_USER",payload:{user:"",loggedIn:!1,token:null}}}})((function(e){var t=te(),a=Object(n.useState)([]),c=Object(u.a)(a,2),s=c[0],i=c[1],l=Object(n.useState)({loading:!1}),d=Object(u.a)(l,2),p=d[0],b=d[1],m=Object(o.f)(),h=function(){var e=Object(k.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/files",{headers:{"x-auth-token":localStorage.getItem("auth-token")}});case 2:t=e.sent,i(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){h()}),[]),Object(U.jsxs)(r.a.Fragment,{children:[Object(U.jsx)("div",{className:t.root,children:Object(U.jsx)(Z.a,{position:"static",children:Object(U.jsx)($.a,{children:Object(U.jsx)(j.a,{className:t.title,onClick:function(){localStorage.removeItem("auth-token"),e.removeUser(),m.push("/")},color:"inherit",children:"LogOut"})})})}),Object(U.jsxs)("main",{className:t.content,children:[Object(U.jsx)(Y,{getAllFiles:h,setState:b}),p.loading?Object(U.jsx)("div",{className:t.pg,children:Object(U.jsx)(ee.a,{})}):Object(U.jsx)("div",{className:t.toolbar,style:{marginTop:20},children:s.length>0?Object(U.jsx)(ae,{files:s}):Object(U.jsx)("h4",{children:"There are currently no files"})})]})]})}));var re=Object(I.b)((function(e){return{user:e.user}}),{loadUser:function(e){return function(){var t=Object(k.a)(w.a.mark((function t(a){var n,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.post("/validate",null,{headers:{"x-auth-token":e}});case 3:n=t.sent,r=n.data,a({type:"LOAD_USER",payload:{username:r.username,token:e,loggedIn:!0}}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert("Error:",t.t0.response.data.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.user,a=e.loadUser;return r.a.useEffect((function(){var e=localStorage.getItem("auth-token");e&&a(e)}),[]),Object(U.jsxs)(o.c,{children:[Object(U.jsx)(o.a,{exact:!0,path:"/",component:R}),Object(U.jsx)(o.a,{exact:!0,path:"/register",component:T}),Object(U.jsx)(o.a,{exact:!0,path:"/dashboard",component:t.loggedIn?ne:T})]})})),ce=a(40),se={user:"",token:null,loggedIn:!1,error:null},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return Object(l.a)(Object(l.a)({},e),{},{user:t.payload.username,token:t.payload.token,loggedIn:t.payload.loggedIn});case"LOG_ERROR":return Object(l.a)(Object(l.a)({},e),{},{error:t.payload.error});case"SET_USER":return Object(l.a)(Object(l.a)({},e),{},{username:t.payload.username,token:t.payload.token});case"LOAD_USER":return Object(l.a)(Object(l.a)({},e),{},{user:t.payload.username,token:t.payload.token,loggedIn:t.payload.loggedIn});case"REMOVE_USER":return{user:t.payload.uername,token:t.payload.token,loggedIn:t.payload.loggedIn};default:return e}},ie=Object(ce.combineReducers)({user:oe}),le=a(81),ue=a(82),de=[le.a],je=Object(ce.createStore)(ie,{},Object(ue.composeWithDevTools)(ce.applyMiddleware.apply(void 0,de)));s.a.render(Object(U.jsx)(r.a.StrictMode,{children:Object(U.jsx)(I.a,{store:je,children:Object(U.jsx)(m.a,{children:Object(U.jsx)(re,{})})})}),document.getElementById("root"))},99:function(e,t,a){}},[[133,1,2]]]);
//# sourceMappingURL=main.de052f97.chunk.js.map